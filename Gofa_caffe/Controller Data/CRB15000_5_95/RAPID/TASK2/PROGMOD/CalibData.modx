MODULE CalibData
      PERS tooldata Gripper_Tool:=[TRUE,[[0.153,0.021,172.1],[1,0,0,0]],[0.426,[0.093,0.483,94.718],[1,0,0,0],0,0,0]];
    PERS tooldata Phin_Tool:=[TRUE,[[-28.679,-0.732,252.938],[1,0,0,0]],[0.426,[0.093,0.483,94.718],[1,0,0,0],0,0,0]];
    PERS tooldata Cup_Tool:=[TRUE,[[-8.277,-0.416,134.749],[1,0,0,0]],[0.13,[0.018,0.033,39.344],[1,0,0,0],0,0,0]];
    PERS tooldata Cup_Top_Tool:=[TRUE,[[-8.277,-32.354,160.103],[1,0,0,0]],[0.13,[0.018,0.033,39.344],[1,0,0,0],0,0,0]];
    PERS tooldata Stirrng_Tool:=[TRUE,[[-0.223,0,223.757],[1,0,0,0]],[0.2,[-0.223,0,81.304],[1,0,0,0],0,0,0]];
    TASK PERS wobjdata Workobject_Home_coffe:=[FALSE,TRUE,"",[[0,0,0],[1,0,0,0]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_Machine_coffe:=[FALSE,TRUE,"",[[249.195,543.725244115,237.75],[0.5,-0.5,0.5,0.5]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_PickPhin:=[FALSE,TRUE,"",[[108.127856863,604.424514258,210.5],[0.5,0.5,0.5,0.5]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_Table_Cup:=[FALSE,TRUE,"",[[730,-150,179.883287657],[0,0,1,0]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_Change_Staytion:=[FALSE,TRUE,"",[[-68.848191875,-758.170008194,0],[1,0,0,0]],[[19.381508197,-684.245409836,0.6],[0.353263674,0.833844696,-0.390551964,-0.165459854]]];
    TASK PERS wobjdata Workobject_Milk:=[FALSE,TRUE,"",[[569.01719888,651.598798599,191.876],[1,0,0,0]],[[698.141,553.447,220.268],[0.034933803,0.924700856,-0.378818092,-0.014311176]]];
    TASK PERS wobjdata Workobject_Machine_Ice:=[FALSE,TRUE,"",[[816.958686583,748.673477882,220.450970714],[0.707106781,0,0,-0.707106781]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_Conial_Burr:=[FALSE,TRUE,"",[[-44.38,693.791,238.5],[1,0,0,0]],[[0,0,0],[1,0,0,0]]];
    TASK PERS wobjdata Workobject_Washing_Phin:=[FALSE,TRUE,"",[[-332.703339985,495.274847006,82.797163774],[0.707106781,0,0,0.707106781]],[[0,0,0],[1,0,0,0]]];
     VAR bool ice_checkbox;
    VAR intnum cup_detection;
    VAR bool detectCupFlag := FALSE;
    VAR bool triggerDetect := FALSE;
    PERS num counter := 0;
    
    CONST robtarget Target_CoffeTG:=[[285.314821193,136.187757973,439.211958834],[0.499999948,-0.500000078,0.500000001,0.499999973],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_10:=[[-127.15,-99.32,64.62],[0.886981,0.461806,0.000113024,-5.11972E-05],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_20:=[[-167.88,-99.31,64.63],[0.886986,0.461796,0.000140976,-5.75123E-05],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_30:=[[-167.88,-99.31,64.63],[0.999985,-0.00541908,0.000151691,1.52303E-05],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_40:=[[-167.87,-99.32,-30.93],[0.999985,-0.00541867,0.000156529,2.81057E-05],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_CupDetection10:=[[740.763167568,1.594,755.175563046],[0.5,0,0.866025404,0],[0,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_50:=[[-111.23,39.85,35.53],[0.50001,-0.499979,0.499998,-0.500013],[0,-1,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_60:=[[-43.70,39.86,35.53],[0.500014,-0.499982,0.499988,-0.500016],[0,-1,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_70:=[[-43.70,133.76,35.52],[0.50001,-0.499984,0.499993,-0.500014],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_80:=[[-281.615966661,-93.794,-126.110392399],[0.991444861,0,0.130526192,0],[0,-2,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_81:=[[-252.34623916,-93.794,-22.678449978],[0.991105118,-0.025953001,0.130481463,-0.003416777],[0,-2,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_82:=[[-252.386,-93.794,-23.061244115],[0.928430715,0.024900301,0.125330818,0.348838886],[0,-2,1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_93:=[[-75.43,-95.93,-201.62],[1,0.000100702,0.000058314,0.000014323],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_94:=[[-75.44,-95.91,55.35],[1,0.000072289,0.000057019,0.000011201],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_95:=[[-42.47,-96,55.29],[1,0.000139253,0.000016251,-0.000035151],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_96:=[[-42.47,-96.02,-181],[1,0.00015543,0.000014733,-0.000036368],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_130:=[[278.36,149.96,-281.23],[0.866025404,0,-0.5,0],[-1,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Table_cup_10:=[[-0.81,149.9,-22.37],[0.70716,0.00004879,-0.707053,0.000043773],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Table_cup_20:=[[-124.62,149.83,-22.36],[0.707184,0.000067792,-0.70703,0.000068661],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Table_cup_30:=[[-124.62,149.94,-181.249712343],[0.707110688,0.000035629,-0.707102873,0.000026078],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Table_cup_40:=[[8.36,149.96,-181.23],[0.707124281,0.000022728,-0.707089281,0.000014387],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change3_10:=[[-569.62,-248.63,-444.41],[0.313674,0.132533,0.366715,-0.865774],[-2,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change3_20:=[[-569.61,-287.85,-406.41],[0.313688,0.132507,0.366703,-0.865777],[-2,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change3_30:=[[-671.38,-346.88,-467.35],[0.31366,0.132498,0.366709,-0.865787],[-2,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change3_40:=[[-671.39,-179.93,-629.03],[0.313653,0.132515,0.366714,-0.865784],[-2,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Stirring_Milk_20:=[[-22.38,879.36,-6.03],[0.921706,0.0349401,-0.0146217,0.386035],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Stirring_Milk_10:=[[-22.37,865.43,175.26],[0.921705,0.0349639,-0.0146316,0.386036],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Press_Milk_20:=[[-101.689999996,836.526663788,75.53913211],[0.92173188,0.034852895,-0.014586998,0.38598295],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Press_Milk_10:=[[-101.68,835.73,86.12],[0.921731,0.0348416,-0.0145801,0.385986],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_40:=[[132.07,1011.29,259.28],[0.641468,0.297552,-0.66206,0.24831],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_10:=[[79.44,963.39,184.6],[0.641474,0.297538,-0.662066,0.248298],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_20:=[[-31.12,851.41,176.1],[0.641474,0.297549,-0.662061,0.248298],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_30:=[[-31.09,846.06,246.71],[0.641469,0.297574,-0.662053,0.248299],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_TG:=[[151.331723704,1161.874950473,63.967447077],[0.921727087,0.034821459,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_50_R:=[[-164.493065585,884.550222895,44.34895995],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_60_R:=[[-161.642729229,878.733903142,84.023208616],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_70_R:=[[-101.019960285,903.177509526,85.873062411],[0.921727087,0.034821459,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_80_R:=[[-71.018414927,883.818445332,84.407930341],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_90_R:=[[-71.018414935,886.836417325,44.521944769],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change2_40:=[[-573.97,-231.85,-733.32],[0.313397,0.132717,0.366796,-0.865811],[-1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change2_30:=[[-573.97,-361.78,-607.50],[0.313402,0.132703,0.366795,-0.865812],[-1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change2_20:=[[-669.75,-417.29,-664.81],[0.313421,0.13271,0.366792,-0.865806],[-1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change2_10:=[[-669.76,-378.18,-702.70],[0.313407,0.132726,0.366794,-0.865807],[-1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change1_10:=[[-476.77,-275.89,-581.04],[0.313524,0.132663,0.366772,-0.865784],[-1,0,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change1_20:=[[-476.76,-332.63,-526.09],[0.31353,0.132651,0.36677,-0.865784],[-1,0,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change1_30:=[[-574.70,-389.40,-584.70],[0.313539,0.132664,0.366769,-0.865779],[-1,0,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Change1_40:=[[-574.70,-218.54,-750.15],[0.313543,0.13265,0.366766,-0.865781],[-1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_160:=[[-6.92,4.14,-265.76],[1,0.000132338,0.000016773,-0.000070285],[-1,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_170:=[[-6.98,14.23,-35.81],[1,0.000056399,0.000014037,-0.000084872],[-1,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_180:=[[-6.98,1.4,-319.98],[1,0.000032417,-0.000049541,-0.000214977],[-1,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_50_L:=[[-58.265294846,864.220576202,42.810717775],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,0,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_60_L:=[[-58.265294838,861.202604209,82.696703347],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_70_L:=[[-101.07532691,910.228520141,86.406247927],[0.921727087,0.034821458,-0.014582399,0.385997404],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_80_L:=[[-145.5,895.12,85.4],[0.92175,0.0347568,-0.0145256,0.385951],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Milk_90_L:=[[-145.5,897.69,51.56],[0.92175,0.0347596,-0.0145271,0.385951],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_10:=[[0,-83.951,90],[0.353553391,-0.612372436,0.353553391,0.612372436],[1,0,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_20:=[[0,-83.951,110],[0.353553391,-0.612372436,0.353553391,0.612372436],[1,0,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Move:=[[-2.499999998,-79.62087298,110],[0.337795104,-0.638500903,0.368638669,0.585078282],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Back:=[[2.499999997,-88.281127021,110],[0.337795104,-0.638500903,0.368638669,0.585078282],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Pitch_1:=[[0,-83.951,110],[0.337795104,-0.638500903,0.368638669,0.585078282],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Roll_1:=[[0,-83.951,110],[0.379928197,-0.627211375,0.326505576,0.59636781],[0,-1,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Pitch_2:=[[0,-83.951,110],[0.368638669,-0.585078282,0.337795104,0.638500903],[0,-1,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Conial_Burr_Roll_2:=[[0,-83.951,110],[0.326505576,-0.59636781,0.379928197,0.627211375],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_0:=[[-327.84,253.57,34.45],[0.000241936,-0.000191813,0.707049245,-0.707164245],[0,0,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_20:=[[121.87,144.86,41.21],[0.000265019,-0.000355463,0.707029,-0.707184],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_10:=[[121.87,67.51,41.21],[0.000270909,-0.00036205,0.707027,-0.707186],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_30:=[[37.92,163.14,38.73],[0.000433538,-0.000335854,0.707017,-0.707196],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_40:=[[37.92,124.14,38.73],[0.00043614,-0.000338701,0.707016,-0.707197],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Pay_50:=[[37.95,124.14,38.84],[0.258201,0.258857,-0.657925,0.658377],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_CupDetection20:=[[721.64,-0.04,361.113],[0,0,1,0],[-1,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Target_CupDetection30:=[[22.712847482,345.110125003,461.239941249],[0,1,0,0],[0,-1,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget washing_TG_10:=[[-351.087047021,-612.018125133,498.85381046],[0.7071067,-0.000000101,0.707106863,0.000000083],[-1,-2,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget washing_TG_10_2:=[[166.264241868,-582.018125133,525.227440813],[0.7071067,-0.000000101,0.707106863,0.000000083],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget washing_TG_10_3:=[[176.978433298,-87.707252441,525.227440813],[0.7071067,-0.000000101,0.707106863,0.000000083],[1,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget washing_TG_10_4:=[[175.000941565,-87.707252441,369.556778008],[-0.000000115,-0.000000013,1,0.00000013],[1,-1,0,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_10:=[[172.642879031,-81.000062655,321.104841996],[0,1,0,0],[1,0,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_20:=[[172.642879031,-81.000062655,138.666836226],[0,1,0,0],[1,0,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_30:=[[125.75,-80.98,138.71],[0.000008786,-1,-0.000025296,-0.000022129],[1,0,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_40:=[[61.903786111,-81.000062655,138.666836226],[0,1,0,0],[1,-1,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_60:=[[172.642879031,-81.000062655,240.297891512],[0.258819045,0.965925826,0,0],[1,-1,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Washing_50:=[[172.642879031,-81.000062655,230.297891512],[0.258819045,0.965925826,0,0],[1,-1,-2,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Press_Milk_30:=[[-101.690000005,839.761826584,32.782719218],[0.921731879,0.034852895,-0.014586998,0.38598295],[0,-1,-1,0],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Table_cup_TG:=[[208.787047735,149.96,-204.561910248],[0.707106781,0,-0.707106781,0],[0,0,-1,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Ice_10:=[[307.305347287,-111.274061296,79.357585587],[0.241844763,-0.664463024,0.241844763,0.664463024],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Ice_20:=[[230.700903059,-46.995300227,79.357585587],[0.241844763,-0.664463024,0.241844763,0.664463024],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    CONST robtarget Ice_30:=[[230.700903059,-46.995300227,118.583809031],[0.241844763,-0.664463024,0.241844763,0.664463024],[0,-1,0,1],[9E+09,9E+09,9E+09,9E+09,9E+09,9E+09]];
    ENDMODULE